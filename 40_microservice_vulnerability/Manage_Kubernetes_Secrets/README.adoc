== Manage Kubernetes Secrets

$ kubectl create secret generic|tls|docker-registry +
$ kubectl create secret generic secret1 --from-literal user=admin +
$ kubectl create secret generic secret2 --from-literal pass=12345678 +

=== Mount Secrate in Deployment|Pod

[source, bash]
----
jh@jh-Pro:~$ kubectl run pod --image=nginx -oyaml --dry-run=client 
apiVersion: v1
kind: Pod
metadata:
  creationTimestamp: null
  labels:
    run: pod
  name: pod
spec:
  containers:
  - image: nginx
    name: pod
    resources: {}
    << HERE >>
  dnsPolicy: ClusterFirst
  restartPolicy: Always
----


as file +
add :
[source, bash]
----
    volumeMounts:
    - name: user
      mountPath: "/etc/secret1"
      readOnly: true
  volumes:
  - name: user
    secret:
      secretName: secret1
----


as env +
add:

[source, bash]
----
    env:
      - name: PASSWORD
        valueFrom:
          secretKeyRef:
            name: secret2
            key: pass

----

Check if it workd

----
$ k exec pod -- env | grep PASSWORD
$ k exec pod -- mount | grep secret1
$ k exec pod -- find /etc/secret1
$ k exec pod -- cat /etc/secret1/user
----
